See [[Lebesgue Integral]] for generalization. See [[Integral Calculus on Euclidean Space]] for techniques for evaluation of the integral.
- **Motivation**: for an ordinary (well-behaved) function, we wanna calculate the "area under the curve". The basic idea of Riemann integral is to achieve this by **simple approximation defined using partitions of the interval**.
- **Disadvantages**
	- Riemann integral does not interact well with taking limits of sequences of functions, making such limiting processes difficult to analyze. This makes some of the works challenging in fields like [[Fourier Series]] and [[FT on L1]]. 
	- The space of Riemann integrable functions is not complete. In response to this we generalize it to Lebesgue integral, based on which we further construct [[Hilbert Space]].
## Definition of Riemann integral
Note that we require $f$ to be defined on a **compact domain**. Otherwise in the interval partition there might be some subintervals without maxima or minima.
- **Original definition**: For $f(x)$, if there exists a constant $I$ such that for any $\varepsilon>0$, there exists a constant $\delta$ s.t. for any tagged partition $P$ whose mesh is smaller than $\delta$ with $x_i\le \xi_i\le x_{i+1}$, $$\left|\sum_{i=0}^{n-1}f(\xi_i)(x_{i+1}-x_i)-I\right|<\varepsilon$$then $f(x)$ is said to be **Riemann integrable** on the interval, where $I$ is the **Riemann integral** of the function.
	- **Uniform convergence of Riemann sum**: for $f\in C([a,b])$ we have the Riemann sum $$f_n(x)=\frac{1}{n}\sum_{k=0}^{n-1}f(x+k/n)\to\int_x^{x+1}f(t)dt\quad\text{uniformly}$$**Proof**: continuous function is integrable, hence the result follows from the Darboux definition. Another proof is to refer to the more general result on uniform convergence of continuous functions. [[Function on Euclidean Space]]
- **Darboux integral definition**: given a partition $P$, define the **upper (lower) Darboux sum** as$$U(f,P)=\sum_{i=0}^{n-1}\sup_{t\in[x_i,x_{i+1}]}f(t)(x_{i+1}-x_i),\quad L(f,P)=\sum_{i=0}^{n-1}\inf_{t\in[x_i,x_{i+1}]}f(t)(x_{i+1}-x_i)$$As the mesh of $P$ tends to $0$, if $\inf U(f,P)$ and $\sup L(f,P)$ exists and coincide then the value is the **Darboux integral**.
	- **Equivalence with Riemann definition**: by Cauchy property Darboux integrability implies Riemann integrability; the converse holds by arbitrary-ness of the definition.
- **Step function definition**: define the Riemann integral of step function $\phi$ to be $\sum c_i(x^{i+1}-x_i)$, and then for any Riemann integrable function define its Riemann integral as $$\int_a^bf(x)dx=\sup\left\{\int_a^b\phi(x)dx:\phi(x)\le f(x)\right\}=\inf\left\{\int_a^b\phi(x)dx:\phi(x)\ge f(x)\right\}$$This definition fits into the generalization to [[Lebesgue Integral]].
- **Lebesgue Theorem**: a bounded function $f(x)$ on a compact interval is Riemann integrable iff all discontinuities of $f(x)$ on the interval form a Lebesgue null set.
  **Proof**: for $\Rightarrow$ note that the set of discontinuities can be represented as $$\Omega=\bigcup_{k=1}^\infty\Omega_k=\bigcup_{k=1}^\infty\set{x\in[a,b]:\omega_f(x)\ge1/k}$$If $\lambda^*(\Omega)>0$ then $\lambda^*(\Omega_k)>\delta$ for $k$ large, hence by definition of [[Lebesgue Measure]] any open cover of $\Omega_k$ will have length at least $\delta$. This means $U(f,P)-L(f,P)\ge\delta/k$, violating the Darboux definition. For $\Leftarrow$ since $\lambda(\Omega)=0$ we have $\lambda(\Omega_k)=0,\forall k$, hence open cover can be made arbitrarily small, and since $\omega_f(x)=0,\forall x\notin\Omega$ the Darboux definition is satisfied.
	- **Corollary**: for $f,g$ integrable on $[a,b]$ we have $|f|,1/f\text{ (if exist)}, \alpha f+\beta g,fg$ integrable.
## Multivariate integral
For a hypercube $I$ in $\mathbb R^n$ we denote it and its volume as $$I(a_1,b_1;\cdots;a_n,b_n),\quad\vol(I)=\prod(b_i-a_i)$$For a given partition $P$, the upper (lower) Darboux sum is defined as $$U(f,P)=\sum_i\sup_{t\in R_i}f(t)\vol(I_i),\quad L(f,P)=\sum_i\inf_{t\in R_i}f(t)\vol(I_i)$$and let $U(f):=U(f,P),L(f):=\sup L(f,P)$. When $U(f)=L(f)$, we define the Riemann integral $$\int_Rf:=L(f)=U(f)$$
- **Riemann measurability**: we say that $E$ is Riemann measurable if $\chi_E$ is Riemann integrable. We have that, $E$ is Riemann measurable iff $\vol(\partial E)=0$.
	- This can be proven by considering the equality between Darboux upper and lower sum. This basically state that $\partial A$ is of measure zero in the Lebesgue sense.
- **Change of variable**: let $\varphi:U\to W$ be a $C^1$ diffeomorphism of open sets in $\mathbb R^n$. Suppose $R\subset U$ is a rectangle. Let $f:\varphi(R)\to R$ be an integrable function and assume that $(f\circ\varphi)|\det(D\varphi)|:R\to\mathbb{R}$ is also integrable. Then we have $$\int_R(f\circ\varphi)|\det(D\varphi)|=\int_{\varphi(R)}f$$
	- In change of variable formula, the determinant basically comes from the "Volume" of rectangles in a partition. [[Determinant]]
- **Fubini's theorem**: for complete [[Metric Space]] $A,B$ and $A\times B$ measurable $f(x,y)$. If $$\int_{A\times B}|f(x,y)|d(x,y)<\infty$$where the integral is taken with respect to a product measure on the space over $A\times B$, then $$\int_A\Big(\int_B f(x,y)dy\Big)dx=\int_B\Big(\int_A f(x,y)dx\Big)dy=\int_{A\times B}f(x,y)d(x,y)$$**Proof**: we utilize the uniqueness of $I=\int f$ such that $$L(f,\mathcal{P})\le I\le U(f,\mathcal{P})$$where $\mathcal{P}$ is any partition of the domain. By refining the partition in both axis we can easily show the result.
	- This could be seen as a integral generalization of the Dirichlet theorem of absolutely convergent series. [[Series]]
## Improper integrals
- **$p$-integral**: let $a\in (0,\infty)$, then $$\int_0^a\frac{dx}{x^p}\begin{cases}\text{diverge}\Leftrightarrow p\ge1\\\text{converge}\Leftrightarrow p<1\end{cases},\quad\int_a^\infty\frac{dx}{x^p}\begin{cases}\text{diverge}\Leftrightarrow p\le1\\\text{converge}\Leftrightarrow p>1\end{cases}$$
	- For integral involving other basic functions:
	  1. $(\ln x)^q$: use $1<\ln x<x^\varepsilon,\forall \varepsilon>0,x\to\infty$ and $1<|\ln x|<\frac{1}{x^\varepsilon},\forall\varepsilon>0,x\to0^+$. Note that when the function has $\frac{1}{x}$ the integration can be directly computed. 
- **Comparison test**: if $f\sim g$ on the domain of study, then $f,g$ have the same convergence behavior.
- **Heine's theorem**: $\int_a^\infty f<\infty$ iff for any $A_n\to\infty$ we have $\sum\int_{A_n}^{A_{n+1}}f<\infty$. This follows directly from definition of improper integral.
	- **Corollary**: for $f\ge0$ we have $\int_a^\infty f<\infty$ iff there exists one $A_n\to\infty$ s.t. $\sum\int_{A_n}^{A_{n+1}}f<\infty$. $\Rightarrow$ is obvious, while $\Leftarrow$ relies on a simple and direct estimation.
- **Abel test**: if $\int_0^\infty f<\infty$ and $g$ is monotonic and bounded on $[a,\infty)$, then $\int_a^\infty fg<\infty$. This is similar to the Abel test in [[Series]].
- **Dirichlet test**: if $F(A)=\int_a^Af(x)dx$ is bounded on $[a,\infty)$ and $g$ is monotonic with $\lim_{x\to\infty} g=0$, then $\int_a^\infty fg<\infty$.
- **Newton-Leibniz formula**: given $f$ integrable on any closed sub-interval of $(a,b)$, let $F=\int f$, if $F(a^+),F(b^-)$ exists, then $\int_a^b f=F(b)-F(a)$. This follows directly from [[Integral Calculus on Euclidean Space]].
	- Change of variable, integration by parts, etc. also applies to improper integral.
### Improper double integral
Existence of improper double integral is defined using the convergence of series of integral whose domain approaches the desired boundless domain.
- **$p$-integral**: let $D=\set{(x,y)|a^2\le x^2+y^2\le\infty}$ and let $r=\sqrt{x^2+y^2}$, then$$\int_D\frac{dxdy}{r^p}\begin{cases}\text{diverge}\Leftrightarrow p\le2\\\text{converge}\Leftrightarrow p>2\end{cases}$$
- **Integrable iff absolutely integrable**: for a improper double integral, it can be shown that it's integrable iff it's absolutely integrable. 
	- **Cauchy test**: assume that $r=\sqrt{x^2+y^2}$, consider the comparison between $|f(x,y)|$ and $\frac{M}{r^p}$. Take $p=2$ as a breaking point, then we can verify whether a function is integrable or not.
- **Uniform convergence**: a function $f(x,y)$ on $D_x\times D_y$ is said to be uniformly convergent w.r.t $y$ if for all $y\in D_y$, $f(x,y)$ can be bounded by a common upper bound $M_y$.
	- **Weierstrass test**: if there exists $F(x)$ such that $|f(x,y)|\le F(x)$ and $\int_{D_x}F(x)$ is convergent, then $f(x,y)$ is uniformly convergent.
- **Calculation of improper integral**: the **change of variable** and **iterative integration** still holds for integrable multivariable integral.