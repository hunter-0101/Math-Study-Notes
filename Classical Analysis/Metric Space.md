A **Metric space** is a pair $(X,d)$ consisting of a **set** $X$ and a **metric** $d:X\times X\to\mathbb R$ satisfying:
1. **Positive definiteness**: $d(x,y)\ge0,\forall x,y\in X$, and $d(x,x)=0,\forall x\in X$.
2. **Symmetry**: $d(x,y)=d(y,x)$.
3. **Triangle inequality**: $d(x,z)\le d(x,y)+d(y,z)$.
	- **Continuity**: $d$ is continuous., since for $(x_1,x_2)\in X\times X,\varepsilon>0$ we can set $$U=B(x_1,\varepsilon)\times B(x_2,\varepsilon)\quad\Longrightarrow\quad d(U)\subset(d(x_1,x_2)-2\varepsilon,d(x_1,x_2)+2\varepsilon)$$by triangle inequality, which implies continuity. Intuitively, $d$ determines how points in $X$ are distinguished, hence the product topology on $X\times X$ naturally makes $d$ continuous.
A large proportion of basic result in classical analysis are built entirely from metric space. This generalize to [[Point Set Topology]] for the concept of "nearness".
- **Convergence**: for a sequence $\set{x_n}$ we say that $x_n\to x$ if for any $\varepsilon>0$ there exists $N\in\mathbb N$ s.t. $$d(x_n,x)<\varepsilon,\quad\forall n>N$$This is a direct generalization to [[Series]] in $\mathbb R$, and $x$ is called the **limit** of $\set{x_n}$.
	- **Uniqueness of limit**: in metric space the limit of a converging sequence is unique, since for two limits $a,b$ of $x_n$ by definition of convergence we have $$d(a,b)\le d(a,x_n)+d(x_n,b)\to0\quad\Longrightarrow\quad d(a,b)=0\quad\iff\quad a=b$$This actually implies that metric space is always **Hausdorff** ([[Separation Axioms]]). Note however that in a general topological space it might happen that the same sequence converges to different points simultaneously, and in this case two different limits are actually indistinguishable under the underlying topology.
	- **Limit point**: $x\in X$ is a limit point of $\set{x_n}$ if it's the limit of a subsequence $\set{x_{n_k}}\subset\set{x_n}$. By definition a sequence converges iff it has a unique limit point.
- **Isometry**: funct ion $f:(X_1,d_1)\to(X_2,d_2)$ is isometric if $$d_2(f(x),f(y))=d_1(x,y),\quad\forall x,y\in X_1$$Metric spaces that are isometric are said to be **essentially identical**.
## Topological properties
Denote $\mathcal T_d$ the topology induced by $d$. Several properties carries over to metric spaces directly from [[Point Set Topology]]:
- **Dense subset**: a subset $A\subset X$ is dense in $(X,d)$ if it's dense in $\mathcal T_d$.
	- **Nowhere dense set**: $A\subset X$ is nowhere dense if $\operatorname{int}\overline A=\varnothing$. 
- **Separability**: $(X,d)$ is separable if $(X,\mathcal T_d)$ is separable. 
	- **Non-separability criterion**: fi there exists an uncountable collection of disjoint balls in $X$, then $X$ is not separable. This is obvious from definition, since any dense subset must intersects with each of the balls, hence at least uncountable.
- **Equivalent metric**: there are two main notions of equivalence between metrics: 
  - **Topological equivalence**: $d_1,d_2$ on the same space $X$ are **topologically equivalent** if they induce the same [[Metric Topology]]. 
  - **Lipchitz (Strong) equivalence**: $d_1,d_2$ are **Lipschitz equivalent** if there exists $\alpha,\beta\in\mathbb R_+$ s.t. $$d_1(x,y)\le\alpha d_2(x,y),\quad d_2(x,y)\le \beta d_1(x,y),\quad \forall x,y$$this is a generalization to equivalent norms in [[Vector Space]].
  Note that Lipschitz equivalence is stronger than topological equivalence.
  **Proof**: by [[Point Set Topology]] it suffices to show that any open ball induced by $d_1$ is also open in $d_2$. Given any ball $B_{d_1}$ under $d_1$, notice that for any $x\in B$, by Lipschitz condition we can find a corresponding $\delta_x$ with $$B_{d_2}(x,\delta_x)\subset B_{d_1}\quad\Longrightarrow\quad B_{d_1}=\bigcup_{x\in B_{d_1}}B_{d_2}(x,\delta_x)$$hence the result follows.
	- **Example**: consider the $\set{1/n:n\in\mathbb N}$ equipped with the ordinary metric and discrete metric. Obviously two metrics are topologically equivalent but not Lipschitz equivalent.
## Completeness
A sequence $\set{x_n}$ is said to be **Cauchy** if for any $\varepsilon>0$ there exists $N\in\mathbb N$ s.t. $$d(x_m,x_n)<\varepsilon,\quad\forall m,n>N$$The space $(X,d)$ is said to be **complete** if any of the following equivalent conditions hold:
1. **Cauchy sequence characterization**: all Cauchy sequence converges in $X$.
2. **Limit of decreasing sets**: given any decreasing sequence of nonempty closed sets with $$F_{n+1}\subset F_n,\quad\lim_{n\to\infty}\diam(F_n)=0$$then $x=\bigcap_{n=1}^\infty F_n$ exists in $X$.
	- **Proof of equivalence**: for $1\Rightarrow2$, we can first pick one point from each $F_n$, show it's Cauchy and identify its limit, and then prove uniqueness by vanishing diameter; for $2\Rightarrow1$, WLOG we assume $d(x_{n},x_{n+1})<2^{-n}$ then we can set $$F_n=\overline{B(x_n,2^{-n+1})}\quad\Longrightarrow\quad F_{n+1}\subset F_n,\quad\diam(F_n)\to0$$hence we can pick a limit and utilize uniqueness of limit of Cauchy sequence (below) to complete the proof.
Some important discussion are listed below:
- **Baire category theorem**: complete $X$ is of second category, i.e., it cannot be represented as an at most countable union of nowhere dense subset. 
  **Proof**: assume otherwise that we can pick nowhere dense $C_n\subset X$ that covers $X$, then there is a closed ball $B_1\subset X\backslash C_1$. Replacing $X$ with $B_1$, then the subsets $B_1\cap C_2$ is still nowhere dense, hence we can repeat to construct $$\set{B_n}_{n\in\mathbb N}\quad\st\quad B_n\subset X\left\backslash\bigcup_{i=1}^nC_i\right.,\quad\lim_{n\to\infty} d(B_n)=0$$by definition $\set{B_n}$ converges to some $x\in X$, contradicting the covering condition. 
- **Uniqueness of limit point**: a Cauchy sequence has a unique "limit point" (possibly outside the underlying space).
  **Proof**: existence of multiple limit points obviously contradicts the definition, while the result on completion below completes the other half.
	- **Intuition**: the fact that a Cauchy sequence "**must converge to something**" might seem not that intuitive at first, but we can get some insights if we look at the definition of convergence above, or even in [[Point Set Topology]] - **convergence is determined by "nearness", which is formalized via neighborhood**. While not as explicit as definition of convergence in metric, the Cauchy property is already sufficient to guarantee that points in the sequence tends towards to "accumulate" as the index grows.
	- **Limit of subsequence**: if a subsequence of a Cauchy sequence converges to a point, then the original sequence also converge to this point. This is obvious, and provides an alternative perspective on the above result.
- **Relation between Cauchy & convergence**: a convergent sequence is obviously Cauchy by definition, but the converse is not true: a Cauchy sequence may converge to some point outside $X$. This is the **only possible way** for a Cauchy sequence to not converge by the result on completion below.
- **Completeness criterion**: given $A$ a dense subset of $(X,d)$, if every Cauchy sequence in $A$ converges to some point in $X$, then $X$ is complete.
  **Proof**: given Cauchy sequence $(x_n)\subset X$, by density of $A$ we can pick $(a_n)\subset A$ s.t. $$d(x_n,a_n)<2^{-n},\quad\forall n\in\mathbb N$$Now we can verify by triangle inequality that $(a_n)$ is also Cauchy, hence converging to some limit $a$, and similarly we can verify $(x_1,a_1,x_2,a_2,\cdots)$ also being Cauchy, hence uniqueness of limit completes the proof.
- **Incomplete space**: several examples of incomplete space is provided below.
	- **Product topology**: consider $X\subset\ell^\infty$ ([[Lp Space]]) defined by $$X=\set{(x^1,x^2,\cdots):\#\set{n:x_n\neq0}<\infty}$$then the sequence $$(1,0,\cdots),\quad(1,\frac{1}{2},0,\cdots),\quad(1,\frac{1}{2},\frac{1}{3},0,\cdots),\quad\cdots$$is Cauchy under $\ell^\infty$ norm, but its limit is outside $X$.
	- **Real number with a special metric**: consider $(\mathbb R,d)$ where the metric is defined by $$d(x,y)=|e^{-x}-e^{-y}|$$then we can easily verify that $\set{x_n=n:n\in\mathbb N}$ is Cauchy but diverges.
- **Completeness is not a topological property**: completeness is a property of the metric itself, not a topological property. Examples include: 
	- **Complete space is homeomorphic to an incomplete space**: just notice that $\mathbb R\cong(0,1)$ via stereographic projection ([[Riemann Sphere]]).
	- **Equivalent metrics on the same space have different completeness property**: the metric space $\set{1/n:n\in\mathbb N}$ is incomplete in the usual metric, but is complete under the discrete metric $d(x,y)=1,\forall x\neq y$. Both induces the same discrete topology.
		- **Intuition**: the metric structure essentially controls how distances shrink along sequences. In the above two examples, the first metric "sees" the sequence are getting arbitrarily close, while the second refuses to.
		- **Topological perspective**: topological space is **generated**, not directly **specified**. For the above two metrics, while they contains the same basis elements, the former one contains some open balls that are directly specified, rather than generated via union, hence making more series into a Cauchy one. 
  However it's worth noting that for normed [[Vector Space]] the case is quite different - two equivalent norms on the same vector space must induce metrics of the same completeness property. See more detail and discussion in that note.
	- **Completeness is preserved under Lipschitz equivalence**: notice that the only property used in the proof in [[Vector Space]] for preservation of completeness is Lipschitz equivalence, we know that Lipschitz equivalence preserves completeness between two metrics.
### Completion
**Completion**: any $(X,d)$ has a completion $\overline X$ that is **unique up to isometric isomorphism**.
**Proof**: consider $\mathcal X$ the space of Cauchy sequences in $X$, and define $$(x_n)\sim(y_n)\quad\iff\quad\lim_{n\to\infty}d(x_n,y_n)=0$$then we can define a new metric space by taking quotient ([[Set Theory]]): $$\overline X=\mathcal X/\sim,\quad\overline d\left([x],[y]\right)=\lim_{n\to\infty}d(x_n,y_n)$$Below we verify that this is a completion to $(X,d)$. This is separated into several steps:
1. **$\overline d$ is well-defined**: given $x^1,x^2\in[x],y^1,y^2\in[y]$ we have that $$\begin{align}d(x^1_n,y^1_n)-d(x_n^2,y_n^2)&\le d(x_n^1,x_n^2)+d(x_n^2,y_n^2)+d(y_n^2,y_n^1)-d(x_n^2,y_n^2)\\&=d(x_n^1,x_n^2)+d(y_n^1,y_n^2)\\&\to0,\quad n\to\infty\end{align}$$the same applies when we interchange two terms, which yields the other half of the desired inequality, hence $\overline d$ is consistent within the same equivalence class. 
2. **$\overline d$ is a metric**: we can directly verify that it satisfies all the metric axioms. 
3. **$(\overline X,\overline d)$ is a completion of $(X,d)$**: this is further divided into four sub-steps:
	1. **$X$ can be isometrically embedded into $\overline X$**: consider the map defined by $$\iota:X\to\overline X,\quad x\mapsto(x,x,\cdots)$$this is obviously an isometric embedding.
	2. **$\overline d|_{\iota(X)}$ is consistent with $d$**: this is obvious by definition of $\iota$.
	3. **$\iota(X)$ is dense in $\overline X$**: for any $[(x_1,x_2,\cdots)]$ just consider $x^i=(x_i,x_i,\cdots)$. Cauchy property yields the result via $\varepsilon$-$N$ language.
	4. **$(\overline X,\overline d)$ is complete**: firstly any Cauchy sequence in $\iota(X)$ converges in $\overline X$ by definition, and by density of $\iota(X)$ we have $(\overline X,\overline d)$ complete by the completeness criterion above.
4. **Any two completions are isomorphic**: given two completions $$\iota_1:(X,d)\to(\overline X_1,\overline d_1),\quad\iota_2:(X,d)\to(\overline X_2,\overline d_2)$$Since both $\iota_1,\iota_2$ are isometries, so is $\psi=\iota_2\circ\iota_1^{-1}$. Wr extend it continuously to $$\psi:\overline X_1\to\overline X_2,\quad\psi(x)=\lim_{n\to\infty}\psi(w_n)\text{ where }(w_n)\subset\iota_1(X)\text{ Cauchy, }w_n\to x$$This is well-defined since limit in metric space is unique (discussed above). Further,
	1. **$\psi$ is surjective**: for any $y\in\overline X_2$ we can take a Cauchy sequence in $\iota_2(X)$ converging to it and consider its preimage. Uniqueness of limit yields the result.
	2. **$\psi$ is injective**: this also follows from uniqueness of limit easily.
  The above results, combined together with continuity of $d$, completes the proof.
## Compactness
$(X,d)$ is **compact** if any of the following **equivalent** conditions hold:
1. **Compactness definition**: every open cover has a finite subcover.
2. **Sequential compactness**: $(X,d)$ is sequentially compact in its [[Metric Topology]] (in the sense of [[Point Set Topology]]).
	- **Proof of equivalence**: for $1\Rightarrow2$, assume otherwise that there exists $(x_n)$ without converging subsequence, then for any $x\in X$ there exists $\delta_x>0$ s.t. $$\#\set{n\in\mathbb N:x_n\in B(x,\delta_z)}<\infty$$now the open cover $X\subset \bigcup_{x\in X}B(x,\delta_x)$ admits a subcover by compactness, hence at least one of the ball in the subcover contains infinitely many $x_n$, a contradiction. For $2\Rightarrow1$, by $1\Leftrightarrow3$ we know that for any $n\in\mathbb N$ we can pick a finite $\frac{1}{n}$-net of $X$, hence there must exists some $B_n=B(x_n,\frac{1}{n})$ in this net that does not admits a finite subcover. The corresponding sequence $\set{x_n}$  converges to some $x\in G$ in the open cover by sequential compactness, and by pick $n$ large enough we can pick some $B_n$ that is covered by $G$, which is a contradiction.
3. **Complete and totally bounded**: $(X,d)$ is complete and totally bounded. 
	- **Totally bounded**: we define the **packing radius** and **covering radius** of $A\subset X$ as $$r=\frac{1}{2}\inf_{x,y\in A,x\neq y}d(x,y),\quad R=\inf\set{R>0:\forall x\in X\ \exists y\in A\text{ s.t. }d(x,y)\le R}$$and $A$ is an **$\varepsilon$-packing** of packing radius $r\ge\varepsilon/2$, or an **$\varepsilon$-covering** of covering radius $R\le\varepsilon$ if the above holds. Finally an **$\varepsilon$-net** is both an $\varepsilon$-packing and an $\varepsilon$-covering. A set $A$ is **totally bounded** if for all $\varepsilon>0$ there exists an $\varepsilon$-net for $A$.
		- **Alternative definition of $\varepsilon$-net**: it's obvious that we can also define $\varepsilon$-net as $$A\subset X\quad\st\quad\forall x\in X\ \exists y\in A:d(x,y)<\varepsilon$$This is actually more useful in most practical cases.
		- **Discussion**: obviously for $\varepsilon_1<\varepsilon_2$ as long as an $\varepsilon_1$-net exists it's immediately an $\varepsilon_2$ net, hence most of the time we only need to focus on the more refined nets.
		- **Relation with boundedness**: obviously a totally bounded set is bounded (via triangle inequality), but the converse is not true in general, e.g., we can consider $$\set{e_i}\subset\ell^\infty,\quad e_i=(0,\cdots,0,\underset{i\text{-th}}{1},0,\cdots)$$which is obviously bounded (by the unit ball), but not totally bounded (does not admit a $\frac{1}{2}$-net).
	- **Proof of equivalence**: for $1\Rightarrow3$, we first utilize the decreasing sets definition - if there exists sequence of decreasing closed sets $F_n\to x\notin X$ then the open cover $$X=\bigcup_{n=1}^\infty X\backslash F_n$$does not admit a finite subcover, contradicting first definition compactness. If $X$ is not totally bounded, there exists $\varepsilon>0$ for which a finite $\varepsilon$-net does not exists, which also contradicts the same definition for obvious reason. For $3\Rightarrow2$, given a sequence in $X$ we can easily use total boundedness to construct a Cauchy subsequence (via [[Diagonal Argument]]), and then use completeness to extract its limit within $X$.
	- **Sequence without convergent subsequence can be separated uniformly**: given $(x_n)_{n=1}^\infty$ in a complete metric space that does not admit a convergent subsequence we show that there exists $\delta>0$ and a subsequence $x_{n_i}$ s.t. $$B(x_{n_i},\delta)\cap B(x_{n_j},\delta)=\varnothing,\quad\forall i\neq j\quad\text{while}\quad\set{x_n}_{n=1}^\infty\not\subset\bigcup_{i\in\mathbb N}B(x_{n_i},\delta)$$Assume otherwise that such $\delta$ do not exist, then we let $\delta_k=2^{-k},k\in\mathbb N$, and pick a finite collection $(x_{n_i}^k)_{k=1}^{S_k}$ s.t. $$\set{x_n}_{n=1}^\infty\subset\bigcup_{k=1}^{S_k}B(x_{n_i}^k,\delta_k)$$Since $(x_n)$ is infinite, there exists one $B(x_{n_i,1}^1,\delta_1)$ that contains infinitely many $x_n$, and this can be repeated for $k\in\mathbb N$ to extract a sequence of elements with $$d(x_{n_i,k}^k,x_{n_i,k+1}^{k+1})<2^{-k}$$This is an absolutely convergent sequence, hence by completeness criterion ([[Banach Space#Series in Banach space]]) this sequence converges, which is a contradiction.
Note that compactness is a topological property ([[Point Set Topology]]), and the last definition via total boundedness does not make sense in general topological space.
- **Relatively compact**: a set $X$ is said to be relatively compact if its closure $\overline X$ is compact. Here compactness can be interpreted as countable compactness or sequential compactness, and accordingly we have relatively sequentially/countably compact. 
	- **Relation with sequential compactness**: the only difference is that, given a sequence, relative compactness does not require the limit of its converging subsequence to be within the set itself. 
	- **Total compactness**: by the same reasoning as above we have that any relatively compact metric space is totally bounded.
	- **Equivalence under completeness**: given $X$ complete, a subset $A\subset X$ is relatively compact iff it's totally bounded.
## $C([a,b],\mathbb R^n)$ space
We consider $C([a,b],\mathbb R^n)$ the space of continuous functions on $[a,b]$, with metric defined by $$d(x,y)=\max_{t\in[a,b]}\|x-y\|,\quad\|x-y\|=\left(\sum_{i=1}^n|x_i(t)-y_i(t)|^2\right)^{1/2}$$that is, the uniform metric induced by the usual [[Euclidean Space]] norm. Below we denote $x^i(t)$ the $i$-the component of $x(t)\in C([a,b],\mathbb R^n)$.
- **Metric space structure**: $\left(C([a,b],\mathbb R^n),d\right)$ defined above is a metric space. This follows directly from the triangle inequality of norm ([[Vector Space]]).
- **Separability**: $\left(C([a,b],\mathbb R^n),d\right)$ is separable. [[Banach Space]]
  **Proof**: by Weierstrass approximation theorem ([[Functional Approximation]]) each component of $x\in C([a,b],\mathbb R^n)$ can be uniformly approximated by elements in $\mathbb P([a,b])$, which itself has the set of polynomials of rational coefficients as a dense subset, hence $C([a,b],\mathbb R^n)$ has a dense subset, which implies that it's separable.
- **Completeness**: $\left(C([a,b],\mathbb R^n),d\right)$ is a complete metric space.
  **Proof**: given sequence $\set{x_k}$ it's obvious that it's Cauchy iff each of $\set{x_k^i}$ is Cauchy. For such a sequence we have $\set{x_k^i(t)}$ Cauchy for any $t\in[a,b]$, hence by completeness of $\mathbb R$ the limit $x^i(t)$ exists, and further by Cauchy property the convergence is uniform, hence $x^i\in C([a,b])$ ([[Function on Euclidean Space]]). Note we take $x=(x^1,\cdots,x^n)$, then we can easily verify that it's the limit of $\set{x_k}$ in $C([a,b],\mathbb R^n)$.
- **Arzela-Ascoli theorem**: a subset $A\subset C([a,b])$ is relatively sequentially compact iff it's bounded and uniformly equicontinuous ([[Function on Euclidean Space]]).
  **Proof**: since $C([a,b])$ is complete, by equivalence of definitions of compactness we know that it suffices to show that total boundedness $\iff$ bounded + uniform equicontinuity. For $\Rightarrow$, total boundedness obviously implies boundedness, and for equicontinuity just notice that existence of $\varepsilon$-net implies $$A\subset\bigcup_{i=1}^nB(x_i,\varepsilon),\quad x_i\in A$$and since continuous functions on compact set is uniformly continuous, by considering the maximal oscillation of $x_i$ over interval of length $\delta$ we can show that $A$ is equicontinuous. For $\Leftarrow$ we can first pick a equi-partition $P=(t_0,t_1,\cdots,t_m)$ of $[a,b]$ s.t. $\|P\|\le\delta$ where $\delta$ is chosen to make the local oscillation bounded by $\varepsilon$ (by equicontinuity), and let $$B=\Set{(x(t_0),x(t_1),\cdots x(t_m)):x\in A}$$then $B$ is bounded in $\mathbb R^{m+1}$, hence admit an $\varepsilon$-net, which induces an $\varepsilon$-net for $A$ by a simple estimation using triangle inequality.
	- **Intuition**: the norm defined above can be seen as a uniform norm over functions taking values from $\mathbb R^n$, and the result is essentially saying that a weakly compact subset of $C([a,b],\mathbb R^n)$ must be of the form $B(x,\varepsilon)$ where $x,\varepsilon\in C([a,b],\mathbb R^n)$ .
## Other results
- **Partition of unity**: For non-intersecting closed sets $F_1,F_2\in\mathbb R^d$, let $$f(x)=\frac{d(x,F_2)}{d(x,F_1)+d(x,F_2)}$$Then $f$ is continuous, $f(x)\in[0,1]$, and $\chi_1=f,\chi_2=1-f$ forms a continuous partition of $1$.
	- **Generalization**: for $F_k,1\le k\le n$ we may define $f(x)=d(x,f_k)/(\sum d(x,f_k))$, or use the weighted sum $\sum w_if_i$ to assign different values to each $F_k$. More general results can be found in [[Topological Manifold]]. 
- **Banach fixed point theorem**: a map $T:X\to X$ is called a **contraction mapping** if there exists $\theta\in[0,1)$, called the **contraction coefficient**, s.t. $$d(T(x),T(y))\le\theta d(x,y),\quad\forall x,y\in X$$we have that, given $X$ complete, such $T$ admits a unique fixed point $x^*$ which can be reached in the following way: pick any $x_0\in X$ and let $x_n=T(x_{n-1})$, then $x^*=\lim x_n$.
  **Proof**: given a sequence $\set{x_n}$ constructed as above it's obvious that it's a Cauchy sequence, hence admits a limit point $x^*$. It's a fixed point since $$x^*=\lim_{n\to\infty} x_n=\lim_{n\to\infty}T(x_{n-1})=T\left(\lim_{n\to\infty}x_{n-1}\right)=T(x^*)$$here interchangeability of $T$ and $\lim$ is validated by continuity of $T$ following from contraction condition. Uniqueness is obvious also by contraction.