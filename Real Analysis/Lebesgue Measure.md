**Motivation**: Lebesgue measure generalize the concept of "size" in $\mathbb R^d$, and introduces new tools with better properties for use to investigate objects in the field of analysis. This is done mainly by the genius idea to define "size" by squishing countable boxed to a set from outside. As an starting point, more general abstract [[Measure]] theory is developed, enriching the scope for which the ideas can be applied.

Below are some examples that illustrates why a "correct and consistent" way of formalizing the intuition of "size" is not so obvious and straight forward, and motivates the theory of Lebesgue measure.
- **Vitali set**: Define $a\sim b\iff a-b\in Q$, and let $N=\mathbb R/\sim$. Number its translations $N_r=N+r\pmod 1$, then $\mu([0,1)])=\sum\mu(N_r)$, which yields a contradiction. [[Special Function Gallery]]
	- It can be easily seen that a function $\mu$ assign to each $E\subset\mathbb{R}^n$ cannot be both additive and invariant to congruence. This is actually an intuitive results of countable infinity.
- (Banach & Tarski) For arbitrary bounded open sets $U,V\subset\mathbb{R}^n,n\ge3$, there exist $k\in\mathbb{N}$ and subsets $E_1,\dots,E_k,F_1,\dots,F_k\subset\mathbb{R}^n$  such that
	1. $E_j$ are disjoint and their union is $U$.
	2. $F_j$ are disjoint and their union is $V$.
	3. $E_j$ is congruent to $F_j$ for $j=1,\dots,k$.
These counter-intuitive examples turned out to rely on AoC ([[Set Theory]]), and as illustrated by the [[Gödel’s (In)completeness Theorem]], instead of asking whether they're "right", we should be caring about whether they're right for what we want.

Another worth noting is that, $\lambda$ cannot be extended to a finitely additive measure over $\mathcal P(\mathbb R^d)$ for $d\ge3$.

---
## Lebesgue outer measure
Define the **Lebesgue outer measure** $\lambda^*$ by $$\lambda^*(E)=\inf\Set{\sum_{k=1}^\infty\left|Q_k\right|:(Q_k)_{k\in\mathbb N}\text{ a sequence of open cubes with }E\subset\bigcup Q_k}$$where $|Q_k|=\prod q_{ki}$ the volume of the cube. $\lambda^*$ is sub-additive. 
- **Equivalent definition**: "open" can be replaced by "closed", since in both definition we can construct a covering of anti-type with arbitrary precision. Also cubes can be replaced by balls, hyper-triangles, or any family of sets $\set{U_\alpha}$ that are of **bounded eccentricity** at any $x\in\mathbb R^d$, i.e., there exists $c>0$ s.t. for each $U_\alpha$ there is a ball $B$ s.t. $$x\in B,\quad U_\alpha\subset B,\quad \lambda(U_\alpha)\ge c\lambda(B)$$with similar argument as above.
- **Well-behaved-ness**: $\lambda^*$ is obviously non-negative, monotonic, and $\sigma$-sub-additive.
	- **Counterexample**: consider translations of Vitali sets. 
	- **Metric outer measure additivity**: if $d(E_1,E_2)>0$, then $\lambda^*(E_1\cup E_2)=\lambda^*(E_1)+\lambda^*(E_2)$, since we can require $\diam(Q_k)<d(E_1,E_2),\forall k$ to ensure that the index sets for $E_1,E_2$ are disjoint. This provides a partial remedy for the counterexample above, but is still not satisfying, and motivates the condition of measurability. 
- **Inner regularity**: for $E=\bigcup_{k=1}^\infty Q_k$ a union of almost disjoint cubes we have $\lambda^*(E)=\sum|Q_k|$.
## Lebesgue measure
**Motivation**: the examples at the start violates the additivity and inner regularity stated above. These pathological exceptions motivates the definition of Lebesgue measurability mainly to ensure disjoint additivity.
A set $E$ is **(Lebesgue) measurable** if one of the following equivalent conditions holds:
1. **External difference**: for any $\varepsilon>0$ there exist open $G\supset E$ s.t. $\lambda^*(G-E)\le\varepsilon$.
2. **Internal difference**: for any $\varepsilon>0$ there exists closed $F\subset E$ s.t. $\lambda^*(E-F)<\varepsilon$. 
	- **Equivalence**: utilizing measurability of complement, outer approximation of $E^C$ naturally yields an inner approximation of $E$, and vise versa.
3. **Carathéodory criterion**: see [[Measure]].
	- **Equivalence**: $3\Rightarrow1$: argue as for metric outer measure ([[Measure]]) to show that open sets are measurable, and then use continuity; $1\Rightarrow3$: given $E$ measurable and any $A$, take $\lambda(G-E)<\varepsilon$, and put $\lambda^*(A)=\lambda^*(A\cap G)+\lambda^*(A\cap G^C)$ (which is already verified) into $\lambda^*(A)+\varepsilon$ to get $\ge$ in Carathéodory criterion.
- **Remark**: definition 3 is mostly used, and is **structural/universal**, since it specifies what a measurable set should feels like. On the other hand, although $1/2\Rightarrow3$ are valid and more intuitive, the definitions **relies on the topology on $\mathbb R^d$** (i.e., it has open sets), and the proof inevitably used some properties deduced from 3 (that open sets are measurable in the sense of 3, otherwise we cannot go from open/closed sets to arbitrary test set).
The **Lebesgue measure** of measurable $E$ is defined by $\lambda(E)=\lambda^*(E)$. Collection of measurable sets will be denoted $\mathcal L$. 
- **Structure of $\mathcal L$**: $\mathcal L$ forms a [[Measure]] space with $\lambda$, with details elaborated below:
	- **Basis element**: by definition, all open/closed sets of $\mathbb R^d$ are measurable; if we use definition 3, we can argue similarly as [[Measure#Outer measure]], which mainly relies on the fact that $\lambda^*$ is a metric outer measure.
		- **Open $\Rightarrow$ closed**: closed sets are measurable, since we can find $\lambda^*(G)-\lambda^*(F)\le\varepsilon$ by definition, and $G-F$, being open, can be written as $G-F=\bigcup Q_n$ where $Q_n$ are almost disjoint cubes. Monotonicity of outer measure yields the result.
	- **$\sigma$-algebra structure**: see [[Measure#Outer measure]] for general discussion. 
	- **$\sigma$-additivity**: sub-additivity complete half of the proof, and the other half can be shown by standard "an $\varepsilon$ of room".
	- $\lambda^*(E)=0\Longrightarrow E\in\mathcal L$, which is direct from definition and monotonicity.
- **Continuity**: given measurable $\set{E_n}$, we have that: $$E_n\nearrow E\quad\text{or}\quad E_n\searrow E,\lambda(E_1)<\infty\quad\Longrightarrow\quad\lambda(E)=\lim\lambda(E_n)$$These results follows directly from the $\sigma$-additivity. [[Measure#Measure]]
	- **Borel-Cantelli lemma**: for $\set{E_n}$ measurable with $\sum\lambda(E_n)<\infty$, then $E=\limsup(E_n)$ is measurable with $\lambda(E)=0$. 
- **Regularity**: Lebesgue measurable regular, meaning that for all $E\in\mathcal L$, $$\begin{align}\lambda(E)&=\sup\set{\lambda(F):F\subset E,F\text{ compact and measurable}}\\ \lambda(E)&=\inf\set{\lambda(G):G\supset E,G\text{ open and measurable}}\end{align}$$**Proof**: outer regularity follows from the definition, while inner regularity follows from outer regularity of $E^C$. They're actually weaker than then definitions, and can be deduced directly from metric outer measure property. [[Measure]]
	- **Symmetric difference**: for $\lambda(E)<\infty$ there exists $F=\bigcup_{j=1}^NQ_j$ of closed cubes s.t. $\lambda(E\triangle F)\le\varepsilon$.
	  **Proof**: by definition we pick $\set{Q_j}$ s.t. $E\subset\bigcup Q_j,\sum|Q_j|<\lambda(E)+\varepsilon/2$, then by Cauchy property there exists $N$ s.t. $\sum_{j=N+1}^\infty|Q_j|<\varepsilon/2$. Take $F=\bigcup_{j=1}^NQ_j$, then $$\begin{align}\lambda(E\triangle F)&=\lambda(E-F)+\lambda(F-E)\\&\le\lambda\left(\sum_{j=N+1}^\infty|Q_j|\right)+\lambda\left(\sum_{j=1}^\infty Q_j-E\right)\\&\le\sum_{j=N+1}^\infty|Q_j|+\sum_{j=1}^\infty|Q_j|-\lambda(E)\le\varepsilon\end{align}$$This actually serves as the fourth definition of measurability, and provides another geometric perspective that a measurable set can be approximated by cubes.
	- **Relation with Borel set**: $\mathcal L=\overline{\mathcal B}$, or more specifically $E\in\mathcal L$ iff $E$ differs from a $G_\delta/F_\sigma$ set by a null set. [[Set Theory]]
	  **Proof**: $\Leftarrow$ is obvious by $\sigma$-algebra structure of $\mathcal L$; $\Rightarrow$ holds for $G_\delta/F_\sigma$ respectively if we apply the outer/inner approximation definition and utilize continuity.
		- **Intuition**: Borel set takes a bottom-up approach, starting from cubes and construct an $\sigma$-algebra; Lebesgue measurable set takes a top-down approach, starting from $\mathcal P(X)$ and delete all sets that are “bad”. 
		- **Non-Borel Lebesgue measurable set**: subsets of sets of Borel measure zero is not necessarily Borel. Consider $\mathcal C$ the Cantor set, then $|\mathcal C|=\mathfrak c$, hence $|\mathcal P(\mathcal C)|=2^\mathfrak c$, however $|\mathcal B|=\mathfrak c$, hence there must be some subsets not in $\mathcal B$. For explicit construction, consider $\phi(x)=x+c(x)$ ([[Special Function Gallery]]), then the pre-image of any Lebesgue non-measurable set is measurable but not Borel (since both $\phi,\phi^{-1}$ maps Borel set to Borel set)
- **Translation & dilation**: given $E\subset\mathbb R^d$ and $\delta=(\delta_1,\cdots,\delta_d)\in\mathbb R^d$, we have $\lambda(E+\delta)=\lambda(E)$ and $\lambda(\delta E)=\delta_1\cdots\delta_d\lambda(E)$. We only need to apply the translation/dilation to any covering.
	- **$\lambda$ is the only Borel measure that is translational invariance**: take any Borel measure $\mu$ and pick a unit cube $Q_1$. Let $\mu(Q_1)=c$, then it's obvious that $\mu(Q_{1/n})=cn^{-d}$ for any such cubes. From this we can deduce $\mu\ll\lambda$, hence $d\mu=fd\lambda$ for some $f\in L^1_{loc}$. Apply differentiation theorem ([[Lebesgue Differentiability]]) we get $$f(x)=\frac{1}{\lambda(Q_n)}\int_{Q_n}fd\lambda=\frac{1}{\lambda(Q_n)}\int_{Q_n}d\mu=\frac{\mu(Q_n)}{\lambda(Q_n)}=c,\quad\forall x\text{ Lebesgue point of }f$$hence $f=c\ae$, yielding $\mu=c\lambda$.
	- **Linear transformation**: given $L\in\mathcal B(\mathbb R^d)$ (i.e., bounded and linear), then $L(E)$ is also measurable whenever $E$ measurable, and $\lambda(L(E))=|\det L|\lambda(E)$.
	  **Proof**: it's obvious that $L$ maps cubes to cubes, and $\lambda(E)=0\Rightarrow\lambda(L(E))=0$, hence $L(E)$ differs from a $F_\sigma$ by a null set, making it measurable. The identity follows from Fubini's theorem and LU decomposition ([[Matrix Decomposition]]). For more general result see [[Lebesgue Integral]].
- **Non-measurable set**: check the beginning of the note. Note that all of the examples rely on AoC. [[Set Theory]]
## Properties
- **Density within hypercube**: for $E\in\mathcal L,\lambda(E)>0,0<\eta<1$, there exists hypercube $I$ s.t.  $$\eta|I|<\lambda(I\cap E)$$**Proof**: consider $E\subset\bigcup I_n$ with error $\varepsilon<(\eta^{-1}-1)\lambda(E)$ (by outer measure definition). If $\lambda(I_n\cap E)\le\eta|I|$ for all $n$, then $$\lambda(E)\le\sum_n\lambda(I_n\cap E)\le\eta\sum_n|I_n|\le\eta(\lambda(E)+\varepsilon)<\lambda(E)$$which is a contradiction.
	- **Key condition**: this property is shared by any measure that is outer regular, in particular, those induced by an outer measure ([[Measure]]). Another useful case is that, any measure induced by a push-forward function from Lebesgue measure is outer regular.
	- **Set of positive but not full measure**: let $\mathbb Q=\set{q_n}$, pick $V_1$ an interval of finite length centered at $r_1$, and let $V_{n}$ be a interval centered at $r_n$ with length $|V_{n-1}|/3$. Set $$W_n=V_n-\bigcup_{k=1}^\infty V_{n+k},\quad\lambda(W_n)\ge\lambda(V_n)-\sum_{k=1}^\infty\lambda(V_{n+k})=|V_n|/2$$In particular, $\lambda(W_n)>0$. For each $n$ choose Borel set $A_n\subset W_n$ with $0<\lambda(A_n)<\lambda(W_n)$ and let $A=\bigcup A_n$, then both $A,A^C$ has positive measure on any interval of $\mathbb R$.
	- **Lebesgue density theorem**: define the **approximate density** of $E\in\mathcal L$ at $x\in\mathbb R^d$ as $$d_{E,\varepsilon}(x)=\frac{\lambda(E\cap B_\varepsilon(x))}{\lambda(B_\varepsilon(x))}$$then $d_E(x)=\lim_{\varepsilon\to0}d_{E,\varepsilon}(x)$ exists $a.e.[\lambda]$ and equals $0$ or $1$. This is a special case of the Lebesgue differentiation theorem applied on $\chi_E$. [[Lebesgue Differentiability]]
	  **Alternative proof**: let $d\mu=\chi_Ed\lambda$, then it can be shown by standard mechanism that $\mu$ is outer regular, thus $\lambda(E\cap B_\varepsilon(x))=\mu(B_\varepsilon(x))$. A replacement yields the result.
		- **Intuition**: the theorem is saying that a measurable set is like a porous version of open set - though looks messy, at proper scale they look like open/closed sets.
		- Points on edges of $E$ may have density in $[0,1]$.
	- **Steinhaus theorem**: for any $\lambda(E)>0$ we show that $B_\varepsilon(0)\subset E-E$. Take hypercube $I$ in which $E$ is dense enough, and let the shortest diameter of $I$ be $\delta$. Define $$J=\Set{x=(\xi_1,\cdots,\xi_n):\left|\xi_i\right|<\frac{\delta}{2},i=1,\cdots,n}$$then it can be shown by pigeon hole principle that $J\subset E-E$. Another proof can be found in [[Functional Approximation]], where convolution smoothing is used as a tool of higher level of abstraction for the above idea. 
		- **Generalization**: given $\lambda(E),\lambda(F)>0$ the set $E+F$ contains an interval.
	- **Existence of arithmetic progression**: given $\lambda(E)>0$ there exists an arithmetic progression of any finite length.
	  **Proof**: first pick one interval $I$ with $\lambda(E\cap I)\ge\alpha\lambda(E)$ for some $0<\alpha<1$. Given arbitrary $n\in\mathbb N$ we consider $E^{(k)}=E\cap(E^{(k-1)}+\frac{1}{n})(0\le k\le n)$, then it can be estimated that $\lambda(E^{(n-1)})\ge1-(n-1)\alpha$. Now just pick $1-\alpha$ small enough and $n$ large enough we can find an arithmetic progression of arbitrary length.
		- **Existence of geometric progression**: consider the induced measure $d\mu=\ln xd\lambda$. Since $e^x$ is increasing we have that $\lambda(\ln E)=\mu(E)>0$, there exists arithmetic progression $\set{x_n}\in \ln E$, whose pre-image $e^{x_n}$ is a geometric progression.
- **Interrelation of different dimensions**: denote $\lambda_k$ the Lebesgue measure of $\mathbb R^k$, then we have $\lambda_{k+l}=\overline{\lambda_k\times\lambda_l}$ by properties of product [[Measure]].
## Other info
- **Relation with countability**: countable set has measure zero by definition, thus set of positive measure must be uncountable. The converse is not true, e.g., the Cantor set $\mathcal C$ ([[Special Function Gallery]]) is uncountable and has measure $0$. 
- Lebesgue measure extends Jordan measure in the sense that Jordan measurable set is also Lebesgue measurable, and they agree on those sets. That's also how [[Lebesgue Integral]] extends [[Riemann Integral]] to function with possibly very weird behavior.