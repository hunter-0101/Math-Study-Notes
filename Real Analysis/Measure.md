**Motivation**: cased on the highly formalized framework of [[Lebesgue Measure]], we generalize it to arbitrary set, and as usual, look at how the standard results can be reproduced.

---
A **measure** on a $\sigma$-algebra ([[Set Theory]]) $(X,\Sigma)$ is a function $\mu:\Sigma\to[0,\infty]$ such that
1. **Null empty set**: $\mu(\varnothing)=0$.
2. **Disjoint $\sigma$-additivity**: $\mu(\bigcup_1^\infty E_j)=\sum_1^\infty\mu(E_j)$ for $\{E_j\}_1^\infty$ a sequence of disjoint sets in $\Sigma$.
Given above, $(X,\Sigma)$ is called a **measurable space** and the sets in $X$ are called **measurable sets**.
- **$\sigma$-finiteness**: a measure $\mu$ is called $\sigma$-finite if there exists $\mu(E_n)<\infty$ s.t. $X=\bigcup E_n$.
	- **Non-$\sigma$-finite measure**: an important example is the [[Hausdorff Measure]] $H_\alpha$ on $\mathbb R^d$ where $d>\alpha$, since any subset of finite $H_\alpha$ measure is a null set under $\lambda$.
- **Continuity**: given $E_n\nearrow E,$ or $E_n\searrow E$ with $\mu(E_1)<\infty$, we have $$\mu(E)=\lim_{n\to\infty}\mu(E_n)$$This follows directly from $\sigma$-additivity. 
	- **Intuition**: [[Set Theory]] convergence essentially says that in $E_n\searrow E$ any element outside $E$ would finally be ruled out, hence the difference $E_n-E$ would eventually be an empty set, which by definition of measure would be a null set.
	- **Topological continuity**: set-theoretic convergence is the convergence induced by weak topology of all finite measures. For $\Leftarrow$ we only need to take $\mu=\delta_x,\forall x$ and verify that $A\subset\liminf A_n\subset\limsup A_n\subset A$, hence $A=\lim A_n$; for $\Rightarrow$ just apply the above continuity.
- **Completeness**: $\mu$ is complete if $S\subset N\in\Sigma,\mu(N)=0\Rightarrow S\in \Sigma$.
	- **Completion of measure**: for $(X,\Sigma,\mu)$ a measure space, let $\mathcal{N}=\set{N\in\Sigma:\mu(N)=0}$ and $\overline{\Sigma}=\set{E\cup F:E\in\Sigma,F\subset N\in\mathcal{N}}$. Then $\overline{\Sigma}$ is a $\sigma$-algebra, and there is a unique extension $\overline{\mu}$ of $\mu$  to a complete measure on $\overline{\Sigma}$.
- **Separability**: a measure space $(X,\Sigma,\mu)$ is separable if there exists a sequence $\set{E_n}_{n\in\mathbb N}\subset\Sigma$ s.t. for any $E\in\Sigma$ there exists $n_k\in\mathbb N$ s.t. $$\mu(E\triangle E_{n_k})\to0,\quad k\to\infty$$
- **Distribution function of measure**: given $(\mathbb R,\mathcal B(\mathbb R),\mu)$ we define its distribution function as $$F_\mu(x)=\begin{cases}\mu((0,x]),&x>0\\0,&x=0\\\mu((x,0]),&x<0\end{cases}$$Conversely any $F$ non-decreasing and right-continuous uniquely determines a measure s.t. $\mu((a,b])=F(b)-F(a)$.
  **Proof**: define $\mu^*$ by $$\mu^*(E)=\inf\Set{\sum_{n=1}^\infty(F(b_n)-F(a_n)):E\subset\bigcup_{n=1}^\infty(a_n,b_n]},\quad\forall E\subset\mathbb R$$It's obvious that $\mu^*$ is an outer measure with $\mu^*((a,b])=F(b)-F(a)$. It's also easy to verify that $\mu^*$ is a metric outer measure, hence $\mu^*$ is a measure on $\mathcal B(\mathbb R)$. Uniqueness is also obvious since $(a,b]$ generates Borel set.
	- **Decomposition of distribution function**: for $F$ increasing and normalized on $\mathbb R$ take $$F=F_A+F_J+F_S$$the decomposition into AC, jump, and singular parts ([[Lebesgue Differentiability]]), and denote the corresponding induced Borel measures as $\mu_A,\mu_J,\mu_S$. Then $$\mu_A\ll\lambda\text{ with }\mu_A(E)=\int_EF'd\lambda,\quad(\mu_J+\mu_S)\perp\lambda$$for the first assertion AC and $\ge$ is obvious, while $\le$ can be done utilizing measurability. For the second assertion notice that $\mu_J$ is supported on a countable set, hence $\mu_J\perp\lambda$, while $\mu_S$.
		- **Corollary**: for AC $F$ we have $\int fd\mu=\int fdF=\int fF'd\lambda$, since we can repeat the process of establishing integral theory based on $\mu_A(E)=\int_EF'd\lambda$.
## Outer measure
An **outer measure** on $X$ is a function $\mu^*:\mathcal{P}(X)\to[0,\infty]$ that satisfies: 
  1. **Null empty set**: $\mu^*(\varnothing)=0$.
  2. **Monotonicity**: $\mu^*(A)\le\mu^*(B)$ if $A\subset B$.
  3. **$\sigma$-sub-additivity**: $\mu^*(\bigcup_1^\infty E_j)\le\sum_1^\infty\mu^*(E_j)$.
  An equivalent definition is to replace 2, 3 with $A\subset\bigcup B_n\Rightarrow \mu^*(A)\le\sum\mu^*(B_n)$ for arbitrary countable set of $A,B_n$. Outer measure takes the largest possible domain, and can be restricted to some sub-domain to define a measure.
- **Carathéodory measurability**: $E\subset X$ is called $\mu^*$-measurable if $$\mu^*(A)=\mu^*(E\cap A)+\mu^*(E^C\cap A),\quad\forall A\subset X$$the collection of measurable sets forms a $\sigma$-algebra $\Sigma$, and $\mu^*|_\Sigma$ is a measure.
  **Proof**: $\Sigma$ is obviously closed under complement. It's easy to deduce closeness under finite union, and further we have $$\mu^*(E_1\cup E_2)=\mu^*(E_1\cap(E_1\cup E_2))+\mu^*(E_1^C\cap (E_1\cup E_2))=\mu^*(E_1)+\mu^*(E_2)$$For countable union of disjoint sets just take the limit in the finite case to get the inequality. Taking $A=\bigcup E_n$ yields disjoint $\sigma$-additivity.
	- **Intuition**: the condition is saying that $\lambda^*$ and the "inner measure" $$\lambda_*(E\cap A)=\lambda^*(A)-\lambda^*(A\cap E^C)$$should agree on arbitrary test set $A$, which ensures disjoint additivity.
	- **Completeness**: any null set is measurable, hence the defined $\sigma$-algebra is complete.
- **Metric outer measure**: given a [[Metric Space]], a metric outer measure  is a measure satisfying $\mu^*(A\cup B)=\mu^*(A)+\mu^*(B),\forall d(A,B)>0$. This property is enjoyed by any measure defined via covering of "regular" sets, and essentially says that the measure is quite compatible with [[Metric Topology]], i.e., measurability is very close to being open/closed. 
	- **Construction of Borel measure**: given metric space $X$ and a metric outer measure $\mu^*$ the restriction $\mu^*|_{\mathcal B_X}$ is a measure. 
	  **Proof**: it suffices to show that any closed $F$ is measurable. Given $A\subset X$ consider $A_n=\set{x\in F^C\cap A:d(x,F)\ge\frac{1}{n}}$, then by closeness of $F$ we have $F^C\cap A=\bigcup A_n$ (if we take $G$ open instead we only need to take $A_n\subset F\cap A$). Since $d(A_n,F)\ge\frac{1}{n}$, $$\mu^*(A)\ge\mu^*(F\cap A)+\mu^*(A_n),\quad\forall n\in\mathbb N$$to show that $\lim_{n\to\infty}\mu^*(A_n)=\mu^*(F^C\cap A)$ we denote $B_n=A_{n+1}-A_n$. Then $$\mu^*(A_{2n})\ge\sum_{k=1}^n\mu^*(B_{2k-1}),\quad\mu^*(A_{2n+1})\ge\sum_{k=1}^n\mu^*(B_{2k})$$since $\mu^*(A)<\infty$ both series converges, and by sub-additivity we have $$\mu^*(A_n)\le\mu^*(F^C\cap A)\le\mu^*(A_n)+\sum_{k=n+1}^\infty\mu^*(B_k)$$this proves the desired limit, hence taking $n\to\infty$ completes the proof.
	- **Regularity**: any Borel measure $\mu$ on a metric space that is finite on finite balls is regular.
	  **Proof**: denote $\mathcal C$ the collection of all sets that has the desired property, then obviously $\mathcal C$ is closed under complement. For countable union, outer regularity follows directly from sub-additivity, while inner regularity follows from sub-additivity and the observation below (we cannot directly apply continuity since countable union of closed sets may not be closed). Finally it's also easy to show that any open set is in $\mathcal C$.
		- **Observation**: for any closed increasing sequence $F_n\nearrow F$ we can fix $x_0\in X$ and denote $B_n=\set{|x-x_0|<n}$, then $F\cap(\overline{B_n}-B_{n-1})$ is finite, hence we can pick proper $N=N(n)$ s.t. $\mu(F-F_{N(n)})\cap(\overline{B_n}-B_{n-1})\le\varepsilon/2^n$, then their union, which is closed, differs from $F$ by $\varepsilon$.
## Pre-measure
Given an algebra $\mathcal A$ a **pre-measure** $\mu_0$ is a function $\mu_0:\mathcal A\to[0,\infty]$ satisfying:
  1. **Null-empty set**: $\mu_0(\varnothing)=0$.
  2. **Disjoint $\sigma$-additivity**: $\mu_0(\bigcup E_n)=\sum\mu_0(E_n)$ for any disjoint sequence $\set{E_n}$ with $\bigcup E_n\in\mathcal A$.
A pre-measure gives rise to an outer measure in a natural way: $$\mu^*(E)=\inf\Set{\sum_{n=1}^\infty\mu_0(E_k):E\subset\bigcup _{n=1}^\infty E_k,E_n\in\mathcal A},\quad\forall E\subset X$$Further, $\mu^*(E)=\mu_0(E),\forall E\in\mathcal A$, and any $E\in\mathcal A$ is measurable in the Carathéodory sense.
**Proof**: qualification as an outer measure is obvious. For $\mu^*=\mu_0$ on $\mathcal A$, notice that $\mu^*\le \mu_0$ by definition, while applying disjoint $\sigma$-additivity to $E_n'=E\cap(E_n-\bigcup_{k=1}^{n-1} E_k)$ yields the reverse. For measurability of $E\in\mathcal A$, by definition for any $\varepsilon>0$ and $A\subset X$ there exists $E_n$ with $\sum_{n=1}^\infty\mu_0(E_n)\le\mu^*(A)+\varepsilon$, while $$\sum_{n=1}^\infty\mu_0(E_n)=\sum_{n=1}^\infty\mu_0(E\cap E_n)+\sum_{n=1}^\infty\mu_0(E^C\cap E_n)\ge\mu^*(E\cap A)+\mu^*(E^C\cap A)$$by arbitrary-ness of $\varepsilon$ we have $\mu^*(A)\ge\mu^*(E\cap A)+\mu^*(E^C\cap A)$.
- **Extension theorem**: given an algebra $\mathcal A$ on $X$ and a pre-measure $\mu_0$, denote $\Sigma=\sigma(\mathcal A)$, then there exists a measure $\mu$ on $\Sigma$ that extends $\mu_0$. When $\mu_0$ is $\sigma$-finite the extension is unique.
  **Proof**: the outer measure $\mu^*$ induced above defines a measure $\mu$ on the $\sigma$-algebra $\Sigma$ of Carathéodory measurable sets, hence $\mu$ is a measure on $\Sigma$ that extends $\mu_0$. For uniqueness, assume that there exists another measure $\nu$ that extends $\mu_0$, then by definition we have $\nu(F)\le\mu(F)$ for any $F\subset\bigcup E_n$. For the reverse denote $E=\bigcup E_n$, then by continuity (derived from $\sigma$-additivity) $\nu(E)=\lim\nu(\bigcup E_n)=\lim\mu(\bigcup E_n)=\mu(E)$. Choose $\mu(E)\le\mu(F)+\varepsilon$, then $$\mu(F)\le\mu(E)=\nu(E)=\nu(F)+\nu(E-F)\le\nu(F)+\mu(E-F)\le\nu(F)+\varepsilon$$hence $\nu(F)\ge\mu(F)$. The $\sigma$-finiteness of $\mu_0$ we can apply above to the entire $X$.
	- **Outer regularity**: for measurable $E$ there exist $F\in\mathcal A_{\sigma\delta}$ s.t. $\mu(F-E)=0$. This is obvious from the definition of outer measure and Carathéodory condition.
Note that the above three concepts actually arises in the reverse direction than documented: $$\begin{matrix}\text{pre-measure}\\\mathcal A\end{matrix}\xrightarrow[\text{covering}]{\text{extension}}\begin{matrix}\text{outer meausre}\\\mathcal P(X)\end{matrix}\xrightarrow[\text{Carathéodory condition}]{\text{restriction of domain}}\begin{matrix}\text{measure}\\\Sigma\end{matrix}$$Each of them have their own unique pros & cons.
## Product measure
For two (complete) measure spaces $(X_1,\Sigma_1,\mu_1),(X_2,\Sigma_2,\mu_2)$, on product of measurable sets $B_1\times B_2$ we define $\mu_0=\mu_1\times\mu_2$ as $$\mu_0(B_1\times B_2)=\mu_1(B_1)\mu_2(B_2),\quad\forall B_1\in \Sigma_1,B_2\in\Sigma_2$$Now $\mu_0$ is a pre-measure on the algebra $\mathcal A$ (collection of finite union of disjoint measurable rectangles). When both $\mu_1,\mu_2$ are $\sigma$-finite, by the extension theorem $\mu_0$ extends uniquely to a measure $\mu$ on $\Sigma=\sigma(\mathcal A)$. Now we have a product measure space $(X_1\times X_2,\Sigma,\mu)$, with $\Sigma=\Sigma_1\otimes\Sigma_2$ by definition.
- **Fubini's theorem**: assuming $\sigma$-finiteness, given $f(x_1,x_2)\in L^1(X_1\times X_2,\mu_1,\times\mu_2)$, for $\ae\ x_2\in X_2$ we have $f^{x_2}(x_1)\in L^1(X_1,\mu_1),\int_{X_1}f^{x_2}d\mu_1\in L^1(X_2,\mu_2)$, with $$\int_{X_2}\left(\int_{X_1}f(x_1,x_2)d\mu_1\right)d\mu_2=\int_{X_1\times X_2}fd(\mu_1\times\mu_2)$$**Proof**: the proof is similar to that in [[Lebesgue Integral]]. Note that in case 1 and 2 the result is strengthened to all $x_2\in X_2$.
  1. $\chi_E:E\in\mathcal A_{\sigma}$: the result immediately holds for measurable rectangles, and since we can decompose $E$ into a disjoint countable union this case follows from $\sigma$-additivity.
  2. $\chi_E:E\in\mathcal A_{\sigma\delta}$: by definition there exist $E_n\in\mathcal A_\sigma$ s.t. $E_n\searrow E$, if $\mu(E)<\infty$ then consider $$f_j(x_2)=\mu_1(E_j^{x_2})\searrow f(x_2)=\mu_1(E^{x_2})$$hence the result follows from DCT, otherwise since $\mu_1,\mu_2$ is $\sigma$-finite we can approximate $E$ from below by finite sets.
  3. $\chi_E:E\in\Sigma$: for $\mu(E)=0$ take $\mathcal A_{\sigma\delta}$ set $F\supset E$ then both sides equals $0$ by 2; in general we only need to decompose $E$ into a $\mathcal A_{\sigma\delta}$ set and a null set.
  4. **Measurable function**: take approximation by simple functions and apply MCT.
	- **Tonelli's theorem** also generalize to this case. 
- **Infinite product**: product measure also generalize to any product that is infinite. We only need to verify that $\bigtimes\mu_\alpha$ is pre-measure on the algebra of cylinder set, and apply the extension theorem.  
## Integral theory
**Discussion**: as discussed in [[Lebesgue Integral]], we use a shift of perspective to build a new integral theory. The fact that it's superior can be elaborated into the following points:
- **$\sigma$-algebra structure**: closeness under countable union and intersections ensures stability under limits.
- **Countable additivity of measure**: guarantees consistent assignment of sizes to infinite disjoint unions, while also prevent paradoxes (e.g., those in [[Lebesgue Measure]]).
- **Completeness**: prevents anomalies, i.e., function defined on a null set must integrate to $0$.
Assuming that $\mu$ is $\sigma$-finite, then almost all basic definitions/properties/theorems from [[Lebesgue Integral]] carries over to a general measurable space $(X,\Sigma,\mu)$.
- **Basic concepts/theorem**: definition of integral and approximation by simple functions generalizes, and theorems like Fatou's lemma, MCT, DCT still hold.
- $L^1(X,\mu)$: the space is a complete normed vector space.
- $L^2(X,\mu)$: the space is a (possibly non-separable) Hilbert space.
- **Lebesgue-Stieltjes integral**: see [[Stieltjes Integral]].
- **Integration under polar coordinate**: the polar coordinate takes the form $(r,\gamma)$ by $$r=|x|,\quad\gamma=\frac{x}{|x|}\quad\iff\quad x=r\gamma$$for $f$ integrable on $\mathbb R^d$ we have $f(r\gamma)$ integrable w.r.t $r^{d-1}dr$ for $\ae\ r$, and with $\sigma(E)=d\lambda(\tilde E)$ where $\tilde E$ is the sector of unit ball whose end points are in $E$, we have $$\int_{\mathbb R^d}f(x)dx=\int_{S^{d-1}}\left(\int_0^\infty f(r\gamma)r^{d-1}dr\right)d\sigma(\gamma)$$**Proof**: identify two spaces $(X_1,\Sigma_1,\mu_1)=(\mathbb R_+,\mathcal L(\mathbb R_+),r^{d-1}dr),(X_2,\Sigma_2,\mu_2)=(S^{d-1},\Sigma_2,\sigma)$, and consider $\mu=\mu_1\times\mu_2$ given by Fubini's theorem, then it suffices to show that $\mu=\lambda$.
  1. **Measurable rectangles**: given $E=E_1\times E_2\in\Sigma_1\times\Sigma_2$, first notice that when $E_1=(0,1)$ the result holds by direct calculation. By dilation property of [[Lebesgue Measure]] this also holds for $(0,a)$, and limiting argument goes to $(0,b]$. This further goes to $(a,b)$, hence all open sets in $\Sigma_1$. Applying the regularity of Lebesgue measure finishes this case.
  2. $\chi_E:E\in\Sigma=\Sigma_1\otimes\Sigma_2$: let measurable rectangles above form an algebra $\mathcal A$, then $\mu$ extends uniquely to $\Sigma=\sigma(\mathcal A)$ by property of product measure, finishing this case.
  3. **Domain equivalence**: before proceeding to integrable functions we need to verify that any $f\in\mathcal L(\mathbb R^d-\set{0})$ is indeed $\mu$-measurable. Notice that any open set in $\mathbb R^d-\set{0}$ can be written as countable union of open sets in $\Sigma_1\times\Sigma_2$, therefore any Borel set, and finally any Lebesgue set by regularity.
  4. **Integrable function**: some standard work from simple functions to the general ones.
  Notice that in step 1, 2 we're only constructing equivalence between $\mu_1\times\mu_2$ and $\mu$ based on explicit calculation, while in step 3 we build a bridge between $\lambda$ and $\mu$, and finally in step 4 we finish all the work by standard procedure.
	- **Expression for $\sigma(S^{d-1})$**: it's obvious by definition that $$\sigma(S^{d-1})=\frac{2\pi^{d/2}}{\Gamma(d/2)}=d\alpha(d)$$as stated in [[Gamma Function]].